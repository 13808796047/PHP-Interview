## PHP 

#### 1.写一段代码保证多个进程同时写入成功

```php
#加锁
function write($filepath,$data) {
     $fp = fopen( $filepath, 'a' );   //以追加的方式打开文件，返回的是指针
 do{
 　　 usleep( 100 ); 　　　　　　//暂停执行程序，参数是以微秒为单位的
 }while( !flock( $fp, LOCK_EX ) );　　//以独享写入的方式锁定文件，成功则返回TRUE，否则FALSE
}
 $res = fwrite( $fp, $data."/n" );　　// 以追加的方式写入数据到打开的文件
 flock( $fp, LOCK_UN );　　　　　　//解锁，以让别的进程进行锁定
 fcloce( $fp );　　　　　　　　　　　//关闭打开的文件指针
 return $res;　　　　　　　　　　　　//返回写入结果
}

```

[https://www.cnblogs.com/gengyi/p/6399206.html](https://www.cnblogs.com/gengyi/p/6399206.html)



## Linux

linux计划任务

在每天凌晨1点运行 a.sh文件

0 1 * * *  sh a.sh

每隔五分钟运行一次

5/* * * * * sh a.sh

每周一当前13：00每隔五分钟运行一次

5/* 13 * * 1 sh a.sh

每月的1号和15号每隔两个小时执行一次

`* */2 1,15 * sh a.sh`

## mysql

1. **Myisam和innodb的差别**

存储结构。myisam一个表，三个文件。结构、数据、索引

innodb 两个文件。索引、数据保持在一个文件。

innodb支持事务、myiam不支持

innodb支持外键、支持行锁

2. **优化数据库的方法**

- 选择正确的存储引擎
- 选择合适的表字段类型
- 适当的增加索引
- 增加服务器的硬件
- 分库分表
- 读写分离

2. **数据库的事务**
3. **写出发帖数最多的十个人的名**

posts(id,username,content) id帖子序号、username 用户名、content内容

```sql
select count(id) as ct from posts group by username order by ct desc  limit 10;
```

5. **有一个数据表user需要按 uid 10，32，22，76，13的顺序检索出来**

```sql 
select * from user where uid  =10 union select * from user where uid  =32 union select * from user where uid  =22 union select * from user where uid  =22 union select * from user where uid  =76 union select * from user where uid  =13
```

   